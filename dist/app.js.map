{"version":3,"file":"app.js","sources":["../node_modules/promise-polyfill/src/finally.js","../src/util/object-assign.js","../node_modules/promise-polyfill/src/index.js","../node_modules/promise-polyfill/src/polyfill.js","../node_modules/preact/dist/preact.mjs","../src/util/pure-component.js","../src/app/components/ImageSelection.jsx","../src/app/components/Canvas.jsx","../src/app/components/Filters.jsx","../src/app/components/LoaderMask.jsx","../node_modules/symbol-observable/es/index.js","../node_modules/symbol-observable/es/ponyfill.js","../node_modules/redux/es/redux.js","../src/util/image-data.js","../src/app/store/reducers/image-change.js","../src/util/worker.js","../src/app/store/constants.js","../src/app/store/main.js","../src/util/filters.js","../src/app/store/reducers/middleware.js","../src/app/components/Application.jsx","../src/app/main.js"],"sourcesContent":["/**\n * @this {Promise}\n */\nfunction finallyConstructor(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      return constructor.resolve(callback()).then(function() {\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n\nexport default finallyConstructor;\n","/**\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n *  */\nif (typeof Object.assign != 'function') {\n    // Must be writable: true, enumerable: false, configurable: true\n    Object.defineProperty(Object, 'assign', {\n        value: function assign(target, varArgs) {\n            // .length of function is 2\n            'use strict';\n            if (target == null) {\n                // TypeError if undefined or null\n                throw new TypeError(\n                    'Cannot convert undefined or null to object'\n                );\n            }\n\n            var to = Object(target);\n\n            for (var index = 1; index < arguments.length; index++) {\n                var nextSource = arguments[index];\n\n                if (nextSource != null) {\n                    // Skip over if undefined or null\n                    for (var nextKey in nextSource) {\n                        // Avoid bugs when hasOwnProperty is shadowed\n                        if (\n                            Object.prototype.hasOwnProperty.call(\n                                nextSource,\n                                nextKey\n                            )\n                        ) {\n                            to[nextKey] = nextSource[nextKey];\n                        }\n                    }\n                }\n            }\n            return to;\n        },\n        writable: true,\n        configurable: true,\n    });\n}\n","import promiseFinally from './finally';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\n/**\n * @constructor\n * @param {Function} fn\n */\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  /** @type {!number} */\n  this._state = 0;\n  /** @type {!boolean} */\n  this._handled = false;\n  /** @type {Promise|undefined} */\n  this._value = undefined;\n  /** @type {!Array<!Function>} */\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\n/**\n * @constructor\n */\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  // @ts-ignore\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!arr || typeof arr.length === 'undefined')\n      throw new TypeError('Promise.all accepts an array');\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(values) {\n  return new Promise(function(resolve, reject) {\n    for (var i = 0, len = values.length; i < len; i++) {\n      values[i].then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n","import Promise from './index';\nimport promiseFinally from './finally';\n\n/** @suppress {undefinedVars} */\nvar globalNS = (function() {\n  // the only reliable means to get the global object is\n  // `Function('return this')()`\n  // However, this causes CSP violations in Chrome apps.\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('unable to locate global object');\n})();\n\nif (!('Promise' in globalNS)) {\n  globalNS['Promise'] = Promise;\n} else if (!globalNS.Promise.prototype['finally']) {\n  globalNS.Promise.prototype['finally'] = promiseFinally;\n}\n","var l,n,u,t,i={},r=[],f=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function e(l,n){for(var u in n)l[u]=n[u];return l}function o(l,n,u){var t,i,r,f,e=arguments;if(null==n&&(n={}),arguments.length>3)for(u=[u],t=3;t<arguments.length;t++)u.push(e[t]);if(null!=u&&(n.children=u),null!=l&&null!=l.defaultProps)for(i in l.defaultProps)void 0===n[i]&&(n[i]=l.defaultProps[i]);return(r=n.ref)&&delete n.ref,(f=n.key)&&delete n.key,c(l,n,null,f,r)}function c(n,u,t,i,r){var f={type:n,props:u,text:t,key:i,ref:r,__k:null,__e:null,l:null,__c:null};return l.vnode&&l.vnode(f),f}function s(){return{}}function a(){}function h(l){return null==l||\"boolean\"==typeof l?null:\"string\"==typeof l||\"number\"==typeof l?c(null,null,l,null,null):Array.isArray(l)?o(a,null,l):null!=l.__e?c(l.type,l.props,l.text,l.key,null):l}function v(l,n){this.props=l,this.context=n}function y(t){!t.__d&&(t.__d=!0)&&1===n.push(t)&&(l.debounceRendering||u)(p)}function p(){for(var l;l=n.pop();)l.__d&&l.forceUpdate()}function d(l,n,u,t,f,e,o,c){var s,v,y,p,d,b,g,w,k,x,A=m(n),C=null==u||u==i?r:m(u),N=C.length,T=C.length?C[0]&&C[0].__e:null;if(null!=e)for(v=0;v<e.length;v++)if(null!=e[v]){T=e[v];break}for(v=0;v<A.length;v++){if(s=A[v]=h(A[v]),b=d=null,null!=(p=C[v])&&(null==s.key&&null==p.key?s.type===p.type:s.key===p.key))d=v;else for(y=0;y<N;y++)if(null!=(p=C[y])&&(null==s.key&&null==p.key?s.type===p.type:s.key===p.key)){d=y;break}if(null!=d&&(b=C[d],C[d]=null),w=null!=T&&T.nextSibling,g=_(null==b?null:b.__e,l,s,b,t,f,e,o,c),null!=s&&null!=g){if(x=document.activeElement,null!=s.l)g=s.l;else if(e==b||g!=T||null==g.parentNode)l:if(null==T||T.parentNode!==l)l.appendChild(g);else{for(k=T,y=0;(k=k.nextSibling)&&y++<N/2;)if(k===g)break l;l.insertBefore(g,T)}x!==document.activeElement&&x.focus(),T=null!=g?g.nextSibling:w}}if(null!=e&&n.type!==a)for(v=e.length;v--;)null!=e[v]&&e[v].remove();for(v=C.length;v--;)null!=C[v]&&P(C[v],c)}function m(l){return null==l.__k&&b(l.props.children,l.__k=[],h),l.__k}function b(l,n,u){if(null==n&&(n=[]),null==l||\"boolean\"==typeof l);else if(Array.isArray(l))for(var t=0;t<l.length;t++)b(l[t],n);else n.push(u?u(l):l);return n}function g(l,n,u,t){var i,r;for(i in n)\"children\"===i||\"key\"===i||u&&u[i]==n[i]||w(l,i,n[i],u[i],t);for(r in u)\"children\"===r||\"key\"===r||n&&r in n||w(l,r,null,u[r],t)}function w(l,n,u,t,i){var r,e,o,c,s,a;if(\"class\"!==n&&\"className\"!==n||(n=i?\"class\":\"className\"),\"style\"===n){if(e=l.style,\"string\"==typeof u)e.cssText=u;else for(o in\"string\"==typeof t&&(e.cssText=\"\"),t)null!=u&&o in u||e.setProperty(o,\"\");for(c in u)r=u[c],null!=t&&r===t[c]||e.setProperty(c.replace(/-?(?=[A-Z])/g,\"-\"),\"number\"==typeof r&&!1===f.test(c)?r+\"px\":r)}else\"dangerouslySetInnerHTML\"===n?u&&t&&u.__html==t.__html||(l.innerHTML=u&&u.__html||\"\"):\"o\"===n[0]&&\"n\"===n[1]?(s=n!==(n=n.replace(/Capture$/,\"\")),a=n.toLowerCase(),n=(a in l?a:n).substring(2),u?t||l.addEventListener(n,k,s):l.removeEventListener(n,k,s),(l.u||(l.u={}))[n]=u):\"list\"!==n&&!i&&n in l?l[n]=null==u?\"\":u:null==u||!1===u?l.removeAttribute(n):\"function\"!=typeof u&&l.setAttribute(n,u)}function k(n){return this.u[n.type](l.event?l.event(n):n)}function _(n,u,t,r,f,o,c,s,y){var p,m,b,g,w,k,x,$,j,z,D,H,I,L;if(null==r||null==t||r.type!==t.type){if(null!=r&&P(r,y),null==t)return null;n=null,r=i}l.diff&&l.diff(t),b=!1,x=t.type;try{l:if(r.type===a||x===a)d(u,t,r,f,o,c,s,p),t.__k.length&&(n=t.__k[0].__e,t.l=t.__k[t.__k.length-1].__e);else if(\"function\"==typeof x){if(z=(j=x.contextType)&&f[j.__c],D=null!=j?z?z.props.value:j.__p:f,r.__c?$=(p=t.__c=r.__c).__p:(b=!0,x.prototype&&x.prototype.render?t.__c=p=new x(t.props,D):(t.__c=p=new v(t.props,D),p.constructor=x,p.render=N),p.__a=y,z&&z.sub(p),p.props=t.props,p.state||(p.state={}),p.context=D,p.__n=f,p.__d=!0,p.__h=[]),p.__v=t,H=p.__s||p.state,null!=x.getDerivedStateFromProps&&(w=e({},p.state),H===p.state&&(H=e({},H)),e(H,x.getDerivedStateFromProps(t.props,H))),b)null==x.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),null!=p.componentDidMount&&s.push(p);else{if(null==x.getDerivedStateFromProps&&null==p.t&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(t.props,D),!p.t&&null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(t.props,H,D)){p.props=t.props,p.state=H,p.__d=!1;break l}null!=p.componentWillUpdate&&p.componentWillUpdate(t.props,H,D)}g=p.props,w||(w=p.state),k=p.context=D,p.props=t.props,p.state=H,l.render&&l.render(t),I=p.__t,L=p.__t=h(p.render(p.props,p.state,p.context)),p.__d=!1,null!=p.getChildContext&&(f=e(e({},f),p.getChildContext())),b||null==p.getSnapshotBeforeUpdate||(k=p.getSnapshotBeforeUpdate(g,w)),p.base=n=_(n,u,L,I,f,o,c,s,p),null!=L&&(t.l=L.l),p.__P=u,t.ref&&C(t.ref,p,y)}else n=A(n,t,r,f,o,c,s,y),t.ref&&r.ref!==t.ref&&C(t.ref,n,y);if(t.__e=n,null!=p){for(;m=p.__h.pop();)m.call(p);b||null==g||null==p.componentDidUpdate||p.componentDidUpdate(g,w,k)}$&&(p.__p=null),l.diffed&&l.diffed(t)}catch(l){T(l,y)}return n}function x(n,u){for(var t;t=n.pop();)try{t.componentDidMount()}catch(l){T(l,t.__a)}l.commit&&l.commit(u)}function A(l,n,u,t,i,f,e,o){var c,s,a,h,v=l;if(i=i?\"foreignObject\"!==n.type:\"svg\"===n.type,null==l&&null!=f)for(c=0;c<f.length;c++)if(null!=(s=f[c])&&(null===n.type?3===s.nodeType:s.localName===n.type)){l=s,f[c]=null;break}if(null==l&&(l=null===n.type?document.createTextNode(n.text):i?document.createElementNS(\"http://www.w3.org/2000/svg\",n.type):document.createElement(n.type),f=null),n.__e=l,null===n.type)null!==v&&l!==v||n.text===u.text||(l.data=n.text);else{if(null!=f&&null!=l.childNodes&&(f=r.slice.call(l.childNodes)),n!==u){if(null==(a=u.props)&&(a={},null!=f))for(h=0;h<l.attributes.length;h++)a[l.attributes[h].name]=l.attributes[h].value;g(l,n.props,a,i)}d(l,n,u,t,i,f,e,o)}return l}function C(l,n,u){try{\"function\"==typeof l?l(n):l.current=n}catch(l){T(l,u)}}function P(n,u){var t,i;if(l.unmount&&l.unmount(n),(t=n.ref)&&C(t,null,u),null!=(t=n.__e)&&t.remove(),n.__e=n.l=null,null!=(t=n.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(l){T(l,u)}t.base=t.__P=null,(t=t.__t)&&P(t,u)}else if(t=n.__k)for(i=0;i<t.length;i++)P(t[i],u)}function N(l,n,u){return this.constructor(l,u)}function T(l,n){for(;n;n=n.__a)if(!n.__p)try{if(null!=n.constructor.getDerivedStateFromError)n.setState(n.constructor.getDerivedStateFromError(l));else{if(null==n.componentDidCatch)continue;n.componentDidCatch(l)}return y(n.__p=n)}catch(n){l=n}throw l}function $(l,n){var u,t=n.__t;l=o(a,null,[l]),u=[],d(n,n.__t=l,t,i,void 0!==n.ownerSVGElement,t?null:r.slice.call(n.childNodes),u,l),x(u,l)}function j(l,n){n.__t=null,$(l,n)}function z(l,n){return n=e(e({},l.props),n),arguments.length>2&&(n.children=r.slice.call(arguments,2)),c(l.type,n,null,n.key||l.key,n.ref||l.ref)}function D(l){var n,u=\"__cC\"+t++,i={__c:u,__p:l};function r(l,n){return l.children(n)}return r.contextType=i,i.Consumer=r,(n={})[u]=null,i.Provider=function(l){var t,i;return this.getChildContext||(i=[],(t=this).getChildContext=function(){return n[u]=t,n},t.componentDidUpdate=function(){var l=t.props.value;i.map(function(n){return l!==n.context&&(n.context=l,y(n))})},t.sub=function(l){i.push(l);var n=l.componentWillUnmount;l.componentWillUnmount=function(){i.splice(i.indexOf(l),1),n&&n()}}),l.children},i}l={},v.prototype.setState=function(l,n){var u=this.__s!==this.state&&this.__s||(this.__s=e({},this.state));this.i=e({},u),(\"function\"!=typeof l||(l=l(u,this.props)))&&e(u,l),null!=l&&(null!=n&&this.__h.push(n),this.t=!1,y(this))},v.prototype.forceUpdate=function(l){var n,u=this.__v,t=this.__v.__e,i=this.__P;null!=i&&(null==this.t&&(this.t=!0),null!=(t=_(t,i,u,u,this.__n,void 0!==i.ownerSVGElement,null,n=[],this.__a))&&t.parentNode!==i&&i.appendChild(t),x(n,u),this.t=null),null!=l&&l()},v.prototype.render=a,n=[],u=\"function\"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,t=0;export{$ as render,j as hydrate,o as createElement,o as h,a as Fragment,s as createRef,v as Component,z as cloneElement,D as createContext,b as toChildArray,l as options};\n//# sourceMappingURL=preact.mjs.map\n","import { Component } from 'preact';\n\nexport function pure(target) {\n    const proto = target.prototype;\n    if (proto && proto.render) {\n        proto.shouldComponentUpdate = shouldComponentUpdate;\n    } else {\n        return target.__scuWrap || (target.__scuWrap = wrap(target));\n    }\n}\n\nfunction wrap(fn) {\n    class Wrap extends Wrapper {}\n    Wrap.prototype.renderChild = fn;\n    return Wrap;\n}\n\nclass Wrapper extends Component {\n    shouldComponentUpdate(props) {\n        return shallowDiffers(props, this.props);\n    }\n    render(props, state, context) {\n        return this.renderChild(props, context);\n    }\n}\n\nexport function shouldComponentUpdate(props, state) {\n    return (\n        shallowDiffers(props, this.props) || shallowDiffers(state, this.state)\n    );\n}\n\nexport function shallowDiffers(a, b) {\n    for (let key in a) if (a[key] !== b[key]) return true;\n    for (let key in b) if (!(key in a)) return true;\n    return false;\n}\n","import { h } from 'preact';\nimport { pure } from '../../util/pure-component';\nimport './ImageSelection.css';\n\nfunction prevent(event) {\n    event.stopPropagation();\n    event.preventDefault();\n}\n\nfunction onDragEnterOrOver(event) {\n    prevent(event);\n    event.currentTarget.classList.add('highlight');\n}\n\nfunction onDrop(image) {\n    const reader = new FileReader();\n    reader.onloadend = function() {\n        image.src = reader.result;\n    };\n\n    return event => {\n        prevent(event);\n        reader.readAsDataURL(event.dataTransfer.files[0]);\n    };\n}\n\nfunction onDragLeave(event) {\n    prevent(event);\n    event.currentTarget.classList.remove('highlight');\n}\n\nfunction onImageLoad(callback) {\n    return event => {\n        const image = event.target;\n        callback(image);\n        URL.revokeObjectURL(image.src);\n    };\n}\n\nfunction onFileChange(image) {\n    return event => {\n        const file = event.target.files[0];\n        file && (image.src = URL.createObjectURL(file));\n    };\n}\n\nfunction ImageSelection(props) {\n    const image = new Image();\n    image.onload = onImageLoad(props.onChange);\n\n    return (\n        <div\n            class=\"drop-target\"\n            onDragEnter={onDragEnterOrOver}\n            onDragOver={onDragEnterOrOver}\n            onDrop={onDrop(image)}\n            onDragLeave={onDragLeave}\n        >\n            Drag &amp; drop or{' '}\n            <label>\n                click here to select\n                <input\n                    id=\"file\"\n                    type=\"file\"\n                    onChange={onFileChange(image)}\n                    accept=\"image/*\"\n                    hidden\n                />\n            </label>{' '}\n            an image\n        </div>\n    );\n}\n\nexport default pure(ImageSelection);\n","import { h, Component } from 'preact';\nimport { pure, shallowDiffers } from '../../util/pure-component.js';\n\nfunction putImageData(canvas, imageData) {\n    const context = canvas.getContext('2d');\n\n    if (imageData) {\n        if (canvas.width !== imageData.width) {\n            canvas.width = imageData.width;\n        }\n        if (canvas.height !== imageData.height) {\n            canvas.height = imageData.height; // this flash canvas\n        }\n\n        context.putImageData(imageData, 0, 0);\n    }\n}\n\nconst Dom = pure(function CanvasDom(props) {\n    return (\n        <canvas\n            ref={props.getRef}\n            style={{\n                maxWidth: '100%',\n                height: 'auto',\n            }}\n        />\n    );\n});\n\nexport default class Canvas extends Component {\n    constructor(props) {\n        super(props);\n        this.getRef = dom => (this.el = dom);\n    }\n\n    shouldComponentUpdate(props) {\n        return shallowDiffers(this.props, props);\n    }\n\n    render() {\n        return <Dom getRef={this.getRef} />;\n    }\n\n    componentDidMount() {\n        putImageData(this.el, this.props.image);\n    }\n\n    componentDidUpdate() {\n        putImageData(this.el, this.props.image);\n    }\n}\n","import { h } from 'preact';\nimport { pure } from '../../util/pure-component';\nimport Canvas from './Canvas';\nimport './Filters.css';\n\nfunction Button(props) {\n    const filter = props.filter;\n\n    if (filter.thumbnail === undefined) {\n        return null;\n    }\n\n    return (\n        <button\n            class={props.selected && 'selected'}\n            onClick={() => props.onSelect(filter.fn)}\n        >\n            <span>{filter.label}</span>\n            <Canvas image={filter.thumbnail} filter={filter.fn} />\n        </button>\n    );\n}\n\nfunction Filters(props) {\n    return (\n        <div class=\"filters\">\n            {props.filters.map(filter => (\n                <PureButton\n                    key={filter.fn}\n                    filter={filter}\n                    selected={filter.fn === props.selected}\n                    onSelect={props.onSelect}\n                />\n            ))}\n        </div>\n    );\n}\n\nconst PureButton = pure(Button);\nconst PureFilters = pure(Filters);\n\nexport default pure(function(props) {\n    const filters = props.filters;\n    return filters.length === 0 ? null : (\n        <PureFilters\n            filters={filters}\n            selected={props.selected}\n            onSelect={props.onSelect}\n        />\n    );\n});\n","import { h } from 'preact';\nimport { pure } from '../../util/pure-component';\n\nconst Mask = pure(function Mask(props) {\n    return props.show === true ? (\n        <div class=\"mask\">\n            <span>\n                <img src=\"dist/assets/loader.svg\" width=\"100\" />\n            </span>\n        </div>\n    ) : null;\n});\n\nexport default pure(function LoaderMask(props) {\n    return (\n        <div class=\"loader\">\n            {props.children}\n            <Mask show={props.loading} />\n        </div>\n    );\n});\n","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","import $$observable from 'symbol-observable';\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error('It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error('You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    if (isDispatching) {\n      throw new Error('You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api-reference/store#subscribe(listener) for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error('You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api-reference/store#subscribe(listener) for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer;\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionDescription = actionType && \"action \\\"\" + String(actionType) + \"\\\"\" || 'an action';\n  return \"Given \" + actionDescription + \", reducer \\\"\" + key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\";\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle \" + ActionTypes.INIT + \" or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers);\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass a single function as the first argument,\n * and get a function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(\"bindActionCreators expected an object or a function, instead received \" + (actionCreators === null ? 'null' : typeof actionCreators) + \". \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var keys = Object.keys(actionCreators);\n  var boundActionCreators = {};\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error(\"Dispatching while constructing your middleware is not allowed. \" + \"Other middleware would not be applied to this dispatch.\");\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { createStore, combineReducers, bindActionCreators, applyMiddleware, compose, ActionTypes as __DO_NOT_USE__ActionTypes };\n","export default function getImageData(image, dWidth, dHeight) {\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n    const sWidth = image.width;\n    const sHeight = image.height;\n\n    dWidth = dWidth === undefined ? sWidth : dWidth;\n    dHeight = dHeight === undefined ? sHeight : dHeight;\n    canvas.width = dWidth;\n    canvas.height = dHeight;\n    context.drawImage(image, 0, 0, sWidth, sHeight, 0, 0, dWidth, dHeight);\n\n    return context.getImageData(0, 0, dWidth, dHeight);\n}\n","import getImageData from '../../../util/image-data';\n\nconst THUMBNAIL_SIZE = 100;\n\nexport function createThumbnail(img) {\n    return getImageData(\n        img,\n        Math.round((img.width * THUMBNAIL_SIZE) / img.height),\n        THUMBNAIL_SIZE\n    );\n}\n\nexport default function imageReducer(state, img) {\n    const image = getImageData(img);\n\n    return Object.assign({}, state, {\n        image,\n        filter: 'ORIGINAL',\n        filteredImage: image,\n    });\n}\n","const myWorker = new Worker('dist/web-worker.js');\nconst requests = {};\n\nmyWorker.onmessage = function(event) {\n    const data = event.data;\n    const timestamp = Array.isArray(data) ? data[4] : -1;\n    const promise = requests[timestamp];\n    if (promise !== undefined) {\n        promise.resolve(data[0]);\n        delete requests[timestamp];\n    }\n};\n\nmyWorker.onerror = function(event) {\n    // no idea\n};\n\nexport function requestImageFilter(options) {\n    const { image, filter, color, threshold } = options;\n    return new Promise(function(resolve, reject) {\n        const timestamp = filter + '_' + performance.now() + Math.random();\n        requests[timestamp] = {\n            resolve,\n            reject,\n        };\n        myWorker.postMessage([image, filter, color, threshold, timestamp]);\n    });\n}\n","// seperate file to avoid circular reference\n\nexport const FILTER_CHANGE = 'FILTER_CHANGE';\nexport const IMAGE_CHANGE = 'IMAGE_CHANGE';\nexport const IMAGE_FILTER_DONE = 'IMAGE_FILTER_DONE';\nexport const THUMBNAIL_FILTER_DONE = 'THUMBNAIL_FILTER_DONE';\n","import { createStore, applyMiddleware } from 'redux';\nimport filters from '../../util/filters';\nimport imageChangeReducer from './reducers/image-change';\nimport middleware from './reducers/middleware';\nimport {\n    FILTER_CHANGE,\n    IMAGE_CHANGE,\n    IMAGE_FILTER_DONE,\n    THUMBNAIL_FILTER_DONE,\n} from './constants';\n\nconst defaultState = {\n    image: null,\n    filteredImage: null,\n    //thumbnail: null,\n    filter: 'ORIGINAL',\n    applyingFilter: false,\n    filters,\n};\n\nconst app = function(state = defaultState, action) {\n    const data = action.data;\n\n    switch (action.type) {\n        case FILTER_CHANGE:\n            return Object.assign({}, state, {\n                filter: data,\n                applyingFilter: true,\n            });\n\n        case IMAGE_CHANGE:\n            return imageChangeReducer(state, data);\n\n        case IMAGE_FILTER_DONE:\n            return Object.assign({}, state, {\n                filteredImage: data,\n                applyingFilter: false,\n            });\n\n        case THUMBNAIL_FILTER_DONE:\n            return Object.assign({}, state, {\n                filters: data,\n            });\n    }\n\n    return state;\n};\n\nexport default createStore(app, applyMiddleware(middleware));\n","export default [\n    {\n        label: 'Original',\n        fn: 'ORIGINAL',\n    },\n    {\n        label: 'Invert',\n        fn: 'INVERT',\n    },\n    {\n        label: 'Grayscale',\n        fn: 'GRAYSCALE',\n    },\n    {\n        label: 'Red Tone',\n        fn: 'RED_TONE',\n    },\n    {\n        label: 'Red',\n        fn: 'RED',\n    },\n    {\n        label: 'Green Tone',\n        fn: 'GREEN_TONE',\n    },\n    {\n        label: 'Green',\n        fn: 'GREEN',\n    },\n    {\n        label: 'Blue Tone',\n        fn: 'BLUE_TONE',\n    },\n    {\n        label: 'Blue',\n        fn: 'BLUE',\n    },\n    {\n        label: 'Hue',\n        fn: 'HUE',\n    },\n    {\n        label: 'Saturation',\n        fn: 'SATURATION',\n    },\n    {\n        label: 'Lightness',\n        fn: 'LIGHTNESS',\n    },\n];\n","import { requestImageFilter } from '../../../util/worker';\nimport { createThumbnail } from './image-change';\nimport {\n    IMAGE_CHANGE,\n    THUMBNAIL_FILTER_DONE,\n    FILTER_CHANGE,\n    IMAGE_FILTER_DONE,\n} from './../constants';\n\nexport default store => next => action => {\n    const state = store.getState();\n    const data = action.data;\n    let image;\n    switch (action.type) {\n        case IMAGE_CHANGE:\n            image = createThumbnail(data);\n            Promise.all(\n                state.filters.map(filter =>\n                    requestImageFilter({\n                        filter: filter.fn,\n                        image,\n                    })\n                )\n            ).then(function(data) {\n                next({\n                    type: THUMBNAIL_FILTER_DONE,\n                    data: state.filters.map((filter, index) => {\n                        return Object.assign({}, filter, {\n                            thumbnail: data[index],\n                        });\n                    }),\n                });\n            });\n            break;\n        case FILTER_CHANGE:\n            setTimeout(function() {\n                requestImageFilter({\n                    filter: data,\n                    image: state.image,\n                }).then(data =>\n                    next({\n                        type: IMAGE_FILTER_DONE,\n                        data,\n                    })\n                );\n            });\n    }\n\n    next(action);\n};\n","import { h, Component } from 'preact';\nimport ImageSelection from './ImageSelection';\nimport Canvas from './Canvas';\nimport Filters from './Filters';\nimport LoaderMask from './LoaderMask';\nimport store from '../store/main';\nimport { IMAGE_CHANGE, FILTER_CHANGE } from '../store/constants';\nimport './Application.css';\n\nexport default class Application extends Component {\n    constructor(props) {\n        super(props);\n        this.state = store.getState();\n    }\n\n    componentDidMount() {\n        store.subscribe(() => this.setState(store.getState()));\n    }\n\n    onImageChange(image) {\n        store.dispatch({\n            type: IMAGE_CHANGE,\n            data: image,\n        });\n    }\n\n    onFilterChange(filter) {\n        filter !== store.getState().filter &&\n            store.dispatch({\n                type: FILTER_CHANGE,\n                data: filter,\n            });\n    }\n\n    render(props, state) {\n        console.log(state);\n        return (\n            <main>\n                <ImageSelection onChange={this.onImageChange} />\n                <LoaderMask loading={state.applyingFilter}>\n                    <Canvas image={state.filteredImage} />\n                </LoaderMask>\n                <Filters\n                    filters={state.filters}\n                    selected={state.filter}\n                    onSelect={this.onFilterChange}\n                />\n            </main>\n        );\n    }\n}\n","import '../util/object-assign.js';\nimport 'promise-polyfill/src/polyfill';\nimport { h, render } from 'preact';\nimport Application from './components/Application.jsx';\n\nrender(<Application />, document.getElementById('root'));\n"],"names":["finallyConstructor","callback","constructor","this","then","value","resolve","reason","reject","Object","assign","defineProperty","target","varArgs","TypeError","to","index","arguments","length","nextSource","nextKey","prototype","hasOwnProperty","call","writable","configurable","setTimeoutFunc","setTimeout","noop","Promise","fn","_state","_handled","_value","undefined","_deferreds","doResolve","handle","self","deferred","_immediateFn","cb","onFulfilled","onRejected","ret","e","promise","push","newValue","finale","thisArg","apply","_unhandledRejectionFn","i","len","Handler","done","ex","prom","promiseFinally","all","arr","args","Array","slice","remaining","res","val","race","values","setImmediate","err","console","warn","globalNS","window","global","Error","l","n","u","r","f","o","t","children","defaultProps","ref","key","c","type","props","text","__k","__e","__c","vnode","a","h","isArray","v","context","y","__d","debounceRendering","p","pop","forceUpdate","d","s","b","g","w","k","x","A","m","C","N","T","nextSibling","_","document","activeElement","parentNode","appendChild","insertBefore","focus","remove","P","style","cssText","setProperty","replace","test","__html","innerHTML","toLowerCase","substring","addEventListener","removeEventListener","removeAttribute","setAttribute","event","$","j","z","D","H","I","L","diff","contextType","__p","render","__a","sub","state","__n","__h","__v","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","__t","getChildContext","getSnapshotBeforeUpdate","base","__P","componentDidUpdate","diffed","commit","nodeType","localName","createTextNode","createElementNS","createElement","data","childNodes","attributes","name","current","unmount","componentWillUnmount","getDerivedStateFromError","setState","componentDidCatch","pure","const","Wrap","proto","__scuWrap","Wrapper","renderChild","ownerSVGElement","bind","shallowDiffers","Component","let","prevent","stopPropagation","preventDefault","onDragEnterOrOver","currentTarget","classList","add","onDrop","image","reader","FileReader","onloadend","src","result","readAsDataURL","dataTransfer","files","onDragLeave","onFileChange","file","URL","createObjectURL","Image","onload","onChange","revokeObjectURL","class","onDragEnter","onDragOver","id","accept","hidden","putImageData","canvas","imageData","getContext","width","height","Dom","getRef","maxWidth","Canvas","super","dom","el","PureButton","filter","thumbnail","selected","onClick","onSelect","label","PureFilters","filters","map","Mask","show","loading","root","Symbol","observable","ponyfill","module","Function","randomString","Math","random","toString","split","join","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","_defineProperty","obj","enumerable","getImageData","dWidth","dHeight","sWidth","sHeight","drawImage","THUMBNAIL_SIZE","myWorker","Worker","requests","requestImageFilter","options","timestamp","performance","now","postMessage","color","threshold","onmessage","onerror","FILTER_CHANGE","IMAGE_CHANGE","IMAGE_FILTER_DONE","THUMBNAIL_FILTER_DONE","defaultState","filteredImage","applyingFilter","createStore","reducer","preloadedState","enhancer","_ref2","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","getState","subscribe","listener","isSubscribed","indexOf","splice","dispatch","action","getPrototypeOf","isPlainObject","listeners","replaceReducer","nextReducer","$$observable","_ref","outerSubscribe","observer","observeState","next","unsubscribe","img","imageChangeReducer","_len","middlewares","_key","store","_dispatch","middlewareAPI","chain","middleware","source","ownKeys","keys","getOwnPropertySymbols","concat","sym","getOwnPropertyDescriptor","forEach","_objectSpread","funcs","arg","reduce","compose","applyMiddleware","round","Application","onImageChange","onFilterChange","log","ImageSelection","LoaderMask","Filters","getElementById"],"mappings":"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"}