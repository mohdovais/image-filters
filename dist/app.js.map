{"version":3,"file":"app.js","sources":["../node_modules/promise-polyfill/src/finally.js","../src/util/object-assign.js","../node_modules/promise-polyfill/src/index.js","../node_modules/promise-polyfill/src/polyfill.js","../node_modules/preact/dist/preact.mjs","../src/util/pure-component.js","../src/app/components/ImageSelection.jsx","../src/app/components/Canvas.jsx","../src/app/components/Filters.jsx","../src/app/components/LoaderMask.jsx","../node_modules/symbol-observable/es/index.js","../node_modules/symbol-observable/es/ponyfill.js","../node_modules/redux/es/redux.js","../src/util/image-data.js","../src/app/store/reducers/image-change.js","../src/util/worker.js","../src/app/store/constants.js","../src/app/store/main.js","../src/util/filters.js","../src/app/store/reducers/middleware.js","../src/app/components/Application.jsx","../src/app/main.js"],"sourcesContent":["/**\n * @this {Promise}\n */\nfunction finallyConstructor(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      return constructor.resolve(callback()).then(function() {\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n\nexport default finallyConstructor;\n","/**\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n *  */\nif (typeof Object.assign != 'function') {\n    // Must be writable: true, enumerable: false, configurable: true\n    Object.defineProperty(Object, 'assign', {\n        value: function assign(target, varArgs) {\n            // .length of function is 2\n            'use strict';\n            if (target == null) {\n                // TypeError if undefined or null\n                throw new TypeError(\n                    'Cannot convert undefined or null to object'\n                );\n            }\n\n            var to = Object(target);\n\n            for (var index = 1; index < arguments.length; index++) {\n                var nextSource = arguments[index];\n\n                if (nextSource != null) {\n                    // Skip over if undefined or null\n                    for (var nextKey in nextSource) {\n                        // Avoid bugs when hasOwnProperty is shadowed\n                        if (\n                            Object.prototype.hasOwnProperty.call(\n                                nextSource,\n                                nextKey\n                            )\n                        ) {\n                            to[nextKey] = nextSource[nextKey];\n                        }\n                    }\n                }\n            }\n            return to;\n        },\n        writable: true,\n        configurable: true,\n    });\n}\n","import promiseFinally from './finally';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\n/**\n * @constructor\n * @param {Function} fn\n */\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  /** @type {!number} */\n  this._state = 0;\n  /** @type {!boolean} */\n  this._handled = false;\n  /** @type {Promise|undefined} */\n  this._value = undefined;\n  /** @type {!Array<!Function>} */\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\n/**\n * @constructor\n */\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  // @ts-ignore\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!arr || typeof arr.length === 'undefined')\n      throw new TypeError('Promise.all accepts an array');\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(values) {\n  return new Promise(function(resolve, reject) {\n    for (var i = 0, len = values.length; i < len; i++) {\n      values[i].then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n","import Promise from './index';\nimport promiseFinally from './finally';\n\n/** @suppress {undefinedVars} */\nvar globalNS = (function() {\n  // the only reliable means to get the global object is\n  // `Function('return this')()`\n  // However, this causes CSP violations in Chrome apps.\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('unable to locate global object');\n})();\n\nif (!('Promise' in globalNS)) {\n  globalNS['Promise'] = Promise;\n} else if (!globalNS.Promise.prototype['finally']) {\n  globalNS.Promise.prototype['finally'] = promiseFinally;\n}\n","var n,l,u,t,i,r={},f=[],e=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function o(n,l){for(var u in l)n[u]=l[u];return n}function c(n){var l=n.parentNode;l&&l.removeChild(n)}function s(n,l,u){var t,i,r,f,e=arguments;if(null==l&&(l={}),arguments.length>3)for(u=[u],t=3;t<arguments.length;t++)u.push(e[t]);if(null!=u&&(l.children=u),null!=n&&null!=n.defaultProps)for(i in n.defaultProps)void 0===l[i]&&(l[i]=n.defaultProps[i]);return(r=l.ref)&&delete l.ref,(f=l.key)&&delete l.key,a(n,l,null,f,r)}function a(l,u,t,i,r){var f={type:l,props:u,text:t,key:i,ref:r,__k:null,__e:null,n:null,__c:null};return n.vnode&&n.vnode(f),f}function h(){return{}}function v(){}function y(n){return null==n||\"boolean\"==typeof n?null:\"string\"==typeof n||\"number\"==typeof n?a(null,null,n,null,null):Array.isArray(n)?s(v,null,n):null!=n.__e?a(n.type,n.props,n.text,n.key,null):n}function p(n,l){this.props=n,this.context=l}function d(t){!t.__d&&(t.__d=!0)&&1===l.push(t)&&(n.debounceRendering||u)(m)}function m(){for(var n;n=l.pop();)n.__d&&n.forceUpdate(!1)}function b(n,l,u,t,i,e,o,s){var a,h,p,d,m,b,w,k,_,A,C=l.__k||g(l.props.children,l.__k=[],y),P=null!=u&&u!=r&&u.__k||f,T=P.length,$=T?P[0]&&P[0].__e:null;if(null!=e)for(h=0;h<e.length;h++)if(null!=e[h]){$=e[h];break}for(h=0;h<C.length;h++){if(a=C[h]=y(C[h]),b=m=null,null!=(d=P[h])&&(null==a.key&&null==d.key?a.type===d.type:a.key===d.key))m=h;else for(p=0;p<T;p++)if(null!=(d=P[p])&&(null==a.key&&null==d.key?a.type===d.type:a.key===d.key)){m=p;break}if(null!=m&&(b=P[m],P[m]=null),k=null!=$&&$.nextSibling,w=x(null==b?null:b.__e,n,a,b,t,i,e,o,s,null),null!=a&&null!=w){if(A=document.activeElement,null!=a.n)w=a.n;else if(e==b||w!=$||null==w.parentNode)n:if(null==$||$.parentNode!==n)n.appendChild(w);else{for(_=$,p=0;(_=_.nextSibling)&&p++<T/2;)if(_===w)break n;n.insertBefore(w,$)}A!==document.activeElement&&A.focus(),$=null!=w?w.nextSibling:k}}if(null!=e&&l.type!==v)for(h=e.length;h--;)null!=e[h]&&c(e[h]);for(h=T;h--;)null!=P[h]&&N(P[h],s)}function g(n,l,u){if(null==l&&(l=[]),null==n||\"boolean\"==typeof n);else if(Array.isArray(n))for(var t=0;t<n.length;t++)g(n[t],l);else l.push(u?u(n):n);return l}function w(n,l,u,t){var i,r;for(i in l)\"children\"===i||\"key\"===i||u&&u[i]==l[i]||k(n,i,l[i],u[i],t);for(r in u)\"children\"===r||\"key\"===r||l&&r in l||k(n,r,null,u[r],t)}function k(n,l,u,i,r){var f,o,c,s,a,h;if(\"class\"!==l&&\"className\"!==l||(l=r?\"class\":\"className\"),\"style\"===l)if(o=n.style,\"string\"==typeof u)o.cssText=u;else{for(c in\"string\"==typeof i&&(o.cssText=\"\"),i)null!=u&&c in u||o.setProperty(c.replace(t,\"-\"),\"\");for(s in u)f=u[s],null!=i&&f===i[s]||o.setProperty(s.replace(t,\"-\"),\"number\"==typeof f&&!1===e.test(s)?f+\"px\":f)}else{if(\"dangerouslySetInnerHTML\"===l)return;\"o\"===l[0]&&\"n\"===l[1]?(a=l!==(l=l.replace(/Capture$/,\"\")),h=l.toLowerCase(),l=(h in n?h:l).substring(2),u?i||n.addEventListener(l,_,a):n.removeEventListener(l,_,a),(n.l||(n.l={}))[l]=u):\"list\"!==l&&!r&&l in n?n[l]=null==u?\"\":u:null==u||!1===u?n.removeAttribute(l):\"function\"!=typeof u&&n.setAttribute(l,u)}}function _(l){return this.l[l.type](n.event?n.event(l):l)}function x(l,u,t,i,f,e,c,s,a,h){var d,m,g,w,k,_,A,j,z,D,H,I,L,M;if(null==i||null==t||i.type!==t.type){if(null!=i&&N(i,a),null==t)return null;l=null,i=r}n.diff&&n.diff(t),g=!1,A=t.type;try{n:if(i.type===v||A===v)b(u,t,i,f,e,c,s,d),t.__k.length&&(l=t.__k[0].__e,t.n=t.__k[t.__k.length-1].__e);else if(\"function\"==typeof A){if(D=(z=A.contextType)&&f[z.__c],H=null!=z?D?D.props.value:z.__p:f,i.__c?j=(d=t.__c=i.__c).__p:(g=!0,A.prototype&&A.prototype.render?t.__c=d=new A(t.props,H):(t.__c=d=new p(t.props,H),d.constructor=A,d.render=T),d.__a=a,D&&D.sub(d),d.props=t.props,d.state||(d.state={}),d.context=H,d.__n=f,d.__d=!0,d.__h=[]),d.__v=t,I=d.__s||d.state,null!=A.getDerivedStateFromProps&&(k=o({},d.state),I===d.state&&(I=o({},I)),o(I,A.getDerivedStateFromProps(t.props,I))),g)null==A.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&s.push(d);else{if(null==A.getDerivedStateFromProps&&null==h&&null!=d.componentWillReceiveProps&&(d.componentWillReceiveProps(t.props,H),I=d.__s||d.state),!h&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(t.props,I,H)){d.props=t.props,d.state=I,d.__d=!1;break n}null!=d.componentWillUpdate&&d.componentWillUpdate(t.props,I,H)}w=d.props,k||(k=d.state),_=d.context=H,d.props=t.props,d.state=I,n.render&&n.render(t),L=d.__t,M=d.__t=y(d.render(d.props,d.state,d.context)),d.__d=!1,null!=d.getChildContext&&(f=o(o({},f),d.getChildContext())),g||null==d.getSnapshotBeforeUpdate||(_=d.getSnapshotBeforeUpdate(w,k)),d.base=l=x(l,u,M,L,f,e,c,s,d,null),null!=M&&(t.n=M.n),d.__P=u,t.ref&&P(t.ref,d,a)}else l=C(l,t,i,f,e,c,s,a),t.ref&&i.ref!==t.ref&&P(t.ref,l,a);if(t.__e=l,null!=d){for(;m=d.__h.pop();)m.call(d);g||null==w||null==d.componentDidUpdate||d.componentDidUpdate(w,k,_)}j&&(d.__p=null),n.diffed&&n.diffed(t)}catch(n){$(n,a)}return l}function A(l,u){for(var t;t=l.pop();)try{t.componentDidMount()}catch(n){$(n,t.__a)}n.commit&&n.commit(u)}function C(n,l,u,t,i,r,e,o){var c,s,a,h,v,y,p=n;if(i=\"svg\"===l.type||i,null==n&&null!=r)for(c=0;c<r.length;c++)if(null!=(s=r[c])&&(null===l.type?3===s.nodeType:s.localName===l.type)){n=s,r[c]=null;break}if(null==n&&(n=null===l.type?document.createTextNode(l.text):i?document.createElementNS(\"http://www.w3.org/2000/svg\",l.type):document.createElement(l.type),r=null),l.__e=n,null===l.type)null!==p&&n!==p||l.text===u.text||(n.data=l.text);else if(null!=r&&null!=n.childNodes&&(r=f.slice.call(n.childNodes)),l!==u){if(null==(a=u.props)&&(a={},null!=r))for(h=0;h<n.attributes.length;h++)a[n.attributes[h].name]=n.attributes[h].value;v=a.dangerouslySetInnerHTML,((y=l.props.dangerouslySetInnerHTML)||v)&&(y&&v&&y.__html==v.__html||(n.innerHTML=y&&y.__html||\"\")),l.props.multiple&&(n.multiple=l.props.multiple),b(n,l,u,t,\"foreignObject\"!==l.type&&i,r,e,o),w(n,l.props,a,i)}return n}function P(n,l,u){try{\"function\"==typeof n?n(l):n.current=l}catch(n){$(n,u)}}function N(l,u,t){var i,r;if(n.unmount&&n.unmount(l),(i=l.ref)&&P(i,null,u),!t&&null==l.n&&(t=null!=(i=l.__e))&&c(i),l.__e=l.n=null,null!=(i=l.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(n){$(n,u)}i.base=i.__P=null,(i=i.__t)&&N(i,u,t)}else if(i=l.__k)for(r=0;r<i.length;r++)N(i[r],u,t)}function T(n,l,u){return this.constructor(n,u)}function $(n,l){for(;l;l=l.__a)if(!l.__p)try{if(null!=l.constructor.getDerivedStateFromError)l.setState(l.constructor.getDerivedStateFromError(n));else{if(null==l.componentDidCatch)continue;l.componentDidCatch(n)}return d(l.__p=l)}catch(l){n=l}throw n}function j(n,l){var u,t=l.__t;n=s(v,null,[n]),u=[],b(l,l.__t=n,t,r,void 0!==l.ownerSVGElement,t?null:f.slice.call(l.childNodes),u,n),A(u,n)}function z(n,l){l.__t=null,j(n,l)}function D(n,l){return l=o(o({},n.props),l),arguments.length>2&&(l.children=f.slice.call(arguments,2)),a(n.type,l,null,l.key||n.key,l.ref||n.ref)}function H(n){var l,u=\"__cC\"+i++,t={__c:u,__p:n};function r(n,l){return n.children(l)}return r.contextType=t,t.Consumer=r,(l={})[u]=null,t.Provider=function(n){var t,i;return this.getChildContext||(i=[],(t=this).getChildContext=function(){return l[u]=t,l},t.componentDidUpdate=function(){var n=t.props.value;i.map(function(l){return n!==l.context&&(l.context=n,d(l))})},t.sub=function(n){i.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){i.splice(i.indexOf(n),1),l&&l()}}),n.children},t}n={},p.prototype.setState=function(n,l){var u=this.__s!==this.state&&this.__s||(this.__s=o({},this.state));(\"function\"!=typeof n||(n=n(u,this.props)))&&o(u,n),null!=n&&(l&&this.__h.push(l),d(this))},p.prototype.forceUpdate=function(n){var l,u=this.__v,t=this.__v.__e,i=this.__P;i&&(null!=(t=x(t,i,u,u,this.__n,void 0!==i.ownerSVGElement,null,l=[],this.__a,!1!==n))&&t.parentNode!==i&&i.appendChild(t),A(l,u)),n&&n()},p.prototype.render=v,l=[],u=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,t=/-?(?=[A-Z])/g,i=0;export{j as render,z as hydrate,s as createElement,s as h,v as Fragment,h as createRef,p as Component,D as cloneElement,H as createContext,g as toChildArray,n as options};\n//# sourceMappingURL=preact.mjs.map\n","import { Component } from 'preact';\n\nexport function pure(target) {\n    const proto = target.prototype;\n    if (proto && proto.render) {\n        proto.shouldComponentUpdate = shouldComponentUpdate;\n    } else {\n        return target.__scuWrap || (target.__scuWrap = wrap(target));\n    }\n}\n\nfunction wrap(fn) {\n    class Wrap extends Wrapper {}\n    Wrap.prototype.renderChild = fn;\n    return Wrap;\n}\n\nclass Wrapper extends Component {\n    shouldComponentUpdate(props) {\n        return shallowDiffers(props, this.props);\n    }\n    render(props, state, context) {\n        return this.renderChild(props, context);\n    }\n}\n\nexport function shouldComponentUpdate(props, state) {\n    return (\n        shallowDiffers(props, this.props) || shallowDiffers(state, this.state)\n    );\n}\n\nexport function shallowDiffers(a, b) {\n    for (let key in a) if (a[key] !== b[key]) return true;\n    for (let key in b) if (!(key in a)) return true;\n    return false;\n}\n","import { h } from 'preact';\nimport { pure } from '../../util/pure-component';\nimport './ImageSelection.css';\n\nfunction prevent(event) {\n    event.stopPropagation();\n    event.preventDefault();\n}\n\nfunction onDragEnterOrOver(event) {\n    prevent(event);\n    event.currentTarget.classList.add('highlight');\n}\n\nfunction onDrop(image) {\n    const reader = new FileReader();\n    reader.onloadend = function() {\n        image.src = reader.result;\n    };\n\n    return event => {\n        prevent(event);\n        reader.readAsDataURL(event.dataTransfer.files[0]);\n    };\n}\n\nfunction onDragLeave(event) {\n    prevent(event);\n    event.currentTarget.classList.remove('highlight');\n}\n\nfunction onImageLoad(callback) {\n    return event => {\n        const image = event.target;\n        callback(image);\n        URL.revokeObjectURL(image.src);\n    };\n}\n\nfunction onFileChange(image) {\n    return event => {\n        const file = event.target.files[0];\n        file && (image.src = URL.createObjectURL(file));\n    };\n}\n\nfunction ImageSelection(props) {\n    const image = new Image();\n    image.onload = onImageLoad(props.onChange);\n\n    return (\n        <div\n            class=\"drop-target\"\n            onDragEnter={onDragEnterOrOver}\n            onDragOver={onDragEnterOrOver}\n            onDrop={onDrop(image)}\n            onDragLeave={onDragLeave}\n        >\n            Drag &amp; drop or{' '}\n            <label>\n                click here to select\n                <input\n                    id=\"file\"\n                    type=\"file\"\n                    onChange={onFileChange(image)}\n                    accept=\"image/*\"\n                    hidden\n                />\n            </label>{' '}\n            an image\n        </div>\n    );\n}\n\nexport default pure(ImageSelection);\n","import { h, Component } from 'preact';\nimport { pure, shallowDiffers } from '../../util/pure-component.js';\n\nfunction putImageData(canvas, imageData) {\n    const context = canvas.getContext('2d');\n\n    if (imageData) {\n        if (canvas.width !== imageData.width) {\n            canvas.width = imageData.width;\n        }\n        if (canvas.height !== imageData.height) {\n            canvas.height = imageData.height; // this flash canvas\n        }\n\n        context.putImageData(imageData, 0, 0);\n    }\n}\n\nconst Dom = pure(function CanvasDom(props) {\n    return (\n        <canvas\n            ref={props.getRef}\n            style={{\n                maxWidth: '100%',\n                height: 'auto',\n            }}\n        />\n    );\n});\n\nexport default class Canvas extends Component {\n    constructor(props) {\n        super(props);\n        this.getRef = dom => (this.el = dom);\n    }\n\n    shouldComponentUpdate(props) {\n        return shallowDiffers(this.props, props);\n    }\n\n    render() {\n        return <Dom getRef={this.getRef} />;\n    }\n\n    componentDidMount() {\n        putImageData(this.el, this.props.image);\n    }\n\n    componentDidUpdate() {\n        putImageData(this.el, this.props.image);\n    }\n}\n","import { h } from 'preact';\nimport { pure } from '../../util/pure-component';\nimport Canvas from './Canvas';\nimport './Filters.css';\n\nfunction Button(props) {\n    const filter = props.filter;\n\n    if (filter.thumbnail === undefined) {\n        return null;\n    }\n\n    return (\n        <button\n            class={props.selected && 'selected'}\n            onClick={() => props.onSelect(filter.fn)}\n        >\n            <span>{filter.label}</span>\n            <Canvas image={filter.thumbnail} filter={filter.fn} />\n        </button>\n    );\n}\n\nfunction Filters(props) {\n    return (\n        <div class=\"filters\">\n            {props.filters.map(filter => (\n                <PureButton\n                    key={filter.fn}\n                    filter={filter}\n                    selected={filter.fn === props.selected}\n                    onSelect={props.onSelect}\n                />\n            ))}\n        </div>\n    );\n}\n\nconst PureButton = pure(Button);\nconst PureFilters = pure(Filters);\n\nexport default pure(function(props) {\n    const filters = props.filters;\n    return filters.length === 0 ? null : (\n        <PureFilters\n            filters={filters}\n            selected={props.selected}\n            onSelect={props.onSelect}\n        />\n    );\n});\n","import { h } from 'preact';\nimport { pure } from '../../util/pure-component';\n\nconst Mask = pure(function Mask(props) {\n    return props.show === true ? (\n        <div class=\"mask\">\n            <span>\n                <img src=\"dist/assets/loader.svg\" width=\"100\" />\n            </span>\n        </div>\n    ) : null;\n});\n\nexport default pure(function LoaderMask(props) {\n    return (\n        <div class=\"loader\">\n            {props.children}\n            <Mask show={props.loading} />\n        </div>\n    );\n});\n","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","import $$observable from 'symbol-observable';\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error('It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error('You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    if (isDispatching) {\n      throw new Error('You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api-reference/store#subscribe(listener) for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error('You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api-reference/store#subscribe(listener) for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer;\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionDescription = actionType && \"action \\\"\" + String(actionType) + \"\\\"\" || 'an action';\n  return \"Given \" + actionDescription + \", reducer \\\"\" + key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\";\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle \" + ActionTypes.INIT + \" or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers);\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass a single function as the first argument,\n * and get a function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(\"bindActionCreators expected an object or a function, instead received \" + (actionCreators === null ? 'null' : typeof actionCreators) + \". \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var keys = Object.keys(actionCreators);\n  var boundActionCreators = {};\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error(\"Dispatching while constructing your middleware is not allowed. \" + \"Other middleware would not be applied to this dispatch.\");\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { createStore, combineReducers, bindActionCreators, applyMiddleware, compose, ActionTypes as __DO_NOT_USE__ActionTypes };\n","export default function getImageData(image, dWidth, dHeight) {\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n    const sWidth = image.width;\n    const sHeight = image.height;\n\n    dWidth = dWidth === undefined ? sWidth : dWidth;\n    dHeight = dHeight === undefined ? sHeight : dHeight;\n    canvas.width = dWidth;\n    canvas.height = dHeight;\n    context.drawImage(image, 0, 0, sWidth, sHeight, 0, 0, dWidth, dHeight);\n\n    return context.getImageData(0, 0, dWidth, dHeight);\n}\n","import getImageData from '../../../util/image-data';\n\nconst THUMBNAIL_SIZE = 100;\n\nexport function createThumbnail(img) {\n    return getImageData(\n        img,\n        Math.round((img.width * THUMBNAIL_SIZE) / img.height),\n        THUMBNAIL_SIZE\n    );\n}\n\nexport default function imageReducer(state, img) {\n    const image = getImageData(img);\n\n    return Object.assign({}, state, {\n        image,\n        filter: 'ORIGINAL',\n        filteredImage: image,\n    });\n}\n","const myWorker = new Worker('dist/web-worker.js');\nconst requests = {};\n\nmyWorker.onmessage = function(event) {\n    const data = event.data;\n    const timestamp = Array.isArray(data) ? data[4] : -1;\n    const promise = requests[timestamp];\n    if (promise !== undefined) {\n        promise.resolve(data[0]);\n        delete requests[timestamp];\n    }\n};\n\nmyWorker.onerror = function(event) {\n    // no idea\n};\n\nexport function requestImageFilter(options) {\n    const { image, filter, color, threshold } = options;\n    return new Promise(function(resolve, reject) {\n        const timestamp = filter + '_' + performance.now() + Math.random();\n        requests[timestamp] = {\n            resolve,\n            reject,\n        };\n        myWorker.postMessage([image, filter, color, threshold, timestamp]);\n    });\n}\n","// seperate file to avoid circular reference\n\nexport const FILTER_CHANGE = 'FILTER_CHANGE';\nexport const IMAGE_CHANGE = 'IMAGE_CHANGE';\nexport const IMAGE_FILTER_DONE = 'IMAGE_FILTER_DONE';\nexport const THUMBNAIL_FILTER_DONE = 'THUMBNAIL_FILTER_DONE';\n","import { createStore, applyMiddleware } from 'redux';\nimport filters from '../../util/filters';\nimport imageChangeReducer from './reducers/image-change';\nimport middleware from './reducers/middleware';\nimport {\n    FILTER_CHANGE,\n    IMAGE_CHANGE,\n    IMAGE_FILTER_DONE,\n    THUMBNAIL_FILTER_DONE,\n} from './constants';\n\nconst defaultState = {\n    image: null,\n    filteredImage: null,\n    filter: 'ORIGINAL',\n    applyingFilter: false,\n    filters,\n};\n\nconst app = function(state = defaultState, action) {\n    const data = action.data;\n\n    switch (action.type) {\n        case FILTER_CHANGE:\n            return Object.assign({}, state, {\n                filter: data,\n                applyingFilter: true,\n            });\n\n        case IMAGE_CHANGE:\n            return imageChangeReducer(state, data);\n\n        case IMAGE_FILTER_DONE:\n            return Object.assign({}, state, {\n                filteredImage: data,\n                applyingFilter: false,\n            });\n\n        case THUMBNAIL_FILTER_DONE:\n            return Object.assign({}, state, {\n                filters: data,\n            });\n    }\n\n    return state;\n};\n\nexport default createStore(app, applyMiddleware(middleware));\n","export default [\n    {\n        label: 'Original',\n        fn: 'ORIGINAL',\n    },\n    {\n        label: 'Invert',\n        fn: 'INVERT',\n    },\n    {\n        label: 'Grayscale',\n        fn: 'GRAYSCALE',\n    },\n    {\n        label: 'Red Tone',\n        fn: 'RED_TONE',\n    },\n    {\n        label: 'Red',\n        fn: 'RED',\n    },\n    {\n        label: 'Green Tone',\n        fn: 'GREEN_TONE',\n    },\n    {\n        label: 'Green',\n        fn: 'GREEN',\n    },\n    {\n        label: 'Blue Tone',\n        fn: 'BLUE_TONE',\n    },\n    {\n        label: 'Blue',\n        fn: 'BLUE',\n    },\n    {\n        label: 'Hue',\n        fn: 'HUE',\n    },\n    {\n        label: 'Saturation',\n        fn: 'SATURATION',\n    },\n    {\n        label: 'Lightness',\n        fn: 'LIGHTNESS',\n    },\n    {\n        label: 'Pixelate',\n        fn: 'PIXELATE',\n    },\n];\n","import { requestImageFilter } from '../../../util/worker';\nimport { createThumbnail } from './image-change';\nimport {\n    IMAGE_CHANGE,\n    THUMBNAIL_FILTER_DONE,\n    FILTER_CHANGE,\n    IMAGE_FILTER_DONE,\n} from './../constants';\n\nexport default store => next => action => {\n    const state = store.getState();\n    const data = action.data;\n    let image;\n    switch (action.type) {\n        case IMAGE_CHANGE:\n            image = createThumbnail(data);\n            Promise.all(\n                state.filters.map(filter =>\n                    requestImageFilter({\n                        filter: filter.fn,\n                        image,\n                    })\n                )\n            ).then(function(data) {\n                next({\n                    type: THUMBNAIL_FILTER_DONE,\n                    data: state.filters.map((filter, index) => {\n                        return Object.assign({}, filter, {\n                            thumbnail: data[index],\n                        });\n                    }),\n                });\n            });\n            break;\n        case FILTER_CHANGE:\n            setTimeout(function() {\n                requestImageFilter({\n                    filter: data,\n                    image: state.image,\n                }).then(data =>\n                    next({\n                        type: IMAGE_FILTER_DONE,\n                        data,\n                    })\n                );\n            });\n    }\n\n    next(action);\n};\n","import { h, Component } from 'preact';\nimport ImageSelection from './ImageSelection';\nimport Canvas from './Canvas';\nimport Filters from './Filters';\nimport LoaderMask from './LoaderMask';\nimport store from '../store/main';\nimport { IMAGE_CHANGE, FILTER_CHANGE } from '../store/constants';\nimport './Application.css';\n\nexport default class Application extends Component {\n    constructor(props) {\n        super(props);\n        this.state = store.getState();\n    }\n\n    componentDidMount() {\n        store.subscribe(() => this.setState(store.getState()));\n    }\n\n    onImageChange(image) {\n        store.dispatch({\n            type: IMAGE_CHANGE,\n            data: image,\n        });\n    }\n\n    onFilterChange(filter) {\n        filter !== store.getState().filter &&\n            store.dispatch({\n                type: FILTER_CHANGE,\n                data: filter,\n            });\n    }\n\n    render(props, state) {\n        //console.log(state);\n        return (\n            <main>\n                <ImageSelection onChange={this.onImageChange} />\n                <LoaderMask loading={state.applyingFilter}>\n                    <Canvas image={state.filteredImage} />\n                </LoaderMask>\n                <Filters\n                    filters={state.filters}\n                    selected={state.filter}\n                    onSelect={this.onFilterChange}\n                />\n            </main>\n        );\n    }\n}\n","import '../util/object-assign.js';\nimport 'promise-polyfill/src/polyfill';\nimport { h, render } from 'preact';\nimport Application from './components/Application.jsx';\n\nrender(<Application />, document.getElementById('root'));\n"],"names":["finallyConstructor","callback","constructor","this","then","value","resolve","reason","reject","Object","assign","defineProperty","target","varArgs","TypeError","to","index","arguments","length","nextSource","nextKey","prototype","hasOwnProperty","call","writable","configurable","setTimeoutFunc","setTimeout","noop","Promise","fn","_state","_handled","_value","undefined","_deferreds","doResolve","handle","self","deferred","_immediateFn","cb","onFulfilled","onRejected","ret","e","promise","push","newValue","finale","thisArg","apply","_unhandledRejectionFn","i","len","Handler","done","ex","prom","promiseFinally","all","arr","args","Array","slice","remaining","res","val","race","values","setImmediate","err","console","warn","globalNS","window","global","Error","n","l","u","t","r","f","o","c","parentNode","removeChild","s","children","defaultProps","ref","key","a","type","props","text","__k","__e","__c","vnode","v","y","isArray","p","context","d","__d","debounceRendering","m","pop","forceUpdate","b","h","w","k","_","A","C","g","P","T","$","nextSibling","x","document","activeElement","appendChild","insertBefore","focus","N","style","cssText","setProperty","replace","test","toLowerCase","substring","addEventListener","removeEventListener","removeAttribute","setAttribute","event","j","z","D","H","I","L","M","diff","contextType","__p","render","__a","sub","state","__n","__h","__v","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","__t","getChildContext","getSnapshotBeforeUpdate","base","__P","componentDidUpdate","diffed","commit","nodeType","localName","createTextNode","createElementNS","createElement","data","childNodes","attributes","name","dangerouslySetInnerHTML","__html","innerHTML","multiple","current","unmount","componentWillUnmount","getDerivedStateFromError","setState","componentDidCatch","pure","const","Wrap","proto","__scuWrap","Wrapper","renderChild","ownerSVGElement","bind","shallowDiffers","Component","let","prevent","stopPropagation","preventDefault","onDragEnterOrOver","currentTarget","classList","add","onDrop","image","reader","FileReader","onloadend","src","result","readAsDataURL","dataTransfer","files","onDragLeave","remove","onFileChange","file","URL","createObjectURL","Image","onload","onChange","revokeObjectURL","class","onDragEnter","onDragOver","id","accept","hidden","putImageData","canvas","imageData","getContext","width","height","Dom","getRef","maxWidth","Canvas","super","dom","el","PureButton","filter","thumbnail","selected","onClick","onSelect","label","PureFilters","filters","map","Mask","show","loading","root","Symbol","observable","ponyfill","module","Function","randomString","Math","random","toString","split","join","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","_defineProperty","obj","enumerable","getImageData","dWidth","dHeight","sWidth","sHeight","drawImage","THUMBNAIL_SIZE","myWorker","Worker","requests","requestImageFilter","options","timestamp","performance","now","postMessage","color","threshold","onmessage","onerror","FILTER_CHANGE","IMAGE_CHANGE","IMAGE_FILTER_DONE","THUMBNAIL_FILTER_DONE","defaultState","filteredImage","applyingFilter","createStore","reducer","preloadedState","enhancer","_ref2","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","getState","subscribe","listener","isSubscribed","indexOf","splice","dispatch","action","getPrototypeOf","isPlainObject","listeners","replaceReducer","nextReducer","$$observable","_ref","outerSubscribe","observer","observeState","next","unsubscribe","img","imageChangeReducer","_len","middlewares","_key","store","_dispatch","middlewareAPI","chain","middleware","source","ownKeys","keys","getOwnPropertySymbols","concat","sym","getOwnPropertyDescriptor","forEach","_objectSpread","funcs","arg","reduce","compose","applyMiddleware","round","Application","onImageChange","onFilterChange","ImageSelection","LoaderMask","Filters","getElementById"],"mappings":"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"}